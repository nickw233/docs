import{aE as e,z as E,H as m,G as n,as as l}from"./index-3cca530d.js";import{u as v,g as C}from"./chartEditStore-eacdd3b3.js";import{u as p}from"./useSync.hook-0f97b777.js";import{g}from"./plugin-ede68460.js";const{updateComponent:S,dataSyncUpdate:o}=p(),a=v(),T=()=>{g({message:"是否覆盖源视图内容，此操作不可撤回?",isMaskClosable:!0,transformOrigin:"center",onPositiveCallback:async()=>{window.$message.success("正在同步编辑器..."),o&&await o(),dispatchEvent(new CustomEvent(e.CHART,{detail:a.getStorageInfo()}))}})},r=()=>{dispatchEvent(new CustomEvent(e.CHART_TO_PREVIEW,{detail:a.getStorageInfo()}))},f=()=>{const t=s=>{window.$message.success("正在进行更新..."),S(s.detail,!0)},c=()=>{a.setEditCanvas(C.IS_CODE_EDIT,!1)},i=()=>{addEventListener("blur",r),addEventListener(e.JSON,t),addEventListener(e.CLOSE,l(c,1e3))},d=()=>{removeEventListener("blur",r),removeEventListener(e.JSON,t)};return(s,u)=>{u==n.CHART_HOME_NAME&&d(),s==n.CHART_HOME_NAME&&i()}},_=()=>{const t=E();m(()=>t.name,f(),{immediate:!0})};export{T as s,_ as u};
