import{M as R}from"./index-4c3bf959.js";import{_ as G}from"./index-fd1e8781.js";import{u as M,b as U,g as E}from"./chartEditStore-eacdd3b3.js";import{u as V,a as k}from"./chartLayoutStore-42609aea.js";import{_ as Y,a2 as z,f as x,d as S,e as q,c as J}from"./index-e27881ef.js";import{dt as Q,du as A,dv as W,dw as X,g as Z,dx as j,dy as tt,dz as et,dA as at,dB as nt,d as st,b as ot,Y as rt,H as lt,a9 as it,m as h,o as d,c as f,h as g,F as ct,n as dt,j as c,k as m,w as u,q as O,t as D,B as L,a2 as w,ar as ut,dC as _t,aG as ft,a as gt}from"./index-3cca530d.js";import{a as mt,b as pt,l as ht,g as Ct}from"./plugin-ede68460.js";import{c as C}from"./index-6270b1c7.js";import{i as vt}from"./icon-8135a16a.js";import"./index-f0373cd4.js";import"./SettingItem-281a83da.js";/* empty css                                                                      */import"./SettingItemBox-54f3c96d.js";import"./CollapseItem.vue_vue_type_script_setup_true_lang-47c71c0e.js";import"./index.esm.min-1d723dc8.js";import"./vchart-3818fc35.js";import"./fileTypeEnum-21359a08.js";function yt(a){var t=a==null?0:a.length;return t?a[t-1]:void 0}var bt=yt;function Et(a,t,n){var l=-1,r=a.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(r);++l<r;)i[l]=a[l+t];return i}var kt=Et,xt=Q,St=kt;function Ot(a,t){return t.length<2?a:xt(a,St(t,0,-1))}var Dt=Ot,Lt=A,wt=bt,At=Dt,Pt=W;function $t(a,t){return t=Lt(t,a),a=At(a,t),a==null||delete a[Pt(wt(t))]}var Tt=$t,Bt=X;function Ft(a){return Bt(a)?void 0:a}var It=Ft,Kt=j,Ht=nt,Nt=Tt,Rt=A,Gt=tt,Mt=It,Ut=et,Vt=at,Yt=1,zt=2,qt=4,Jt=Ut(function(a,t){var n={};if(a==null)return n;var l=!1;t=Kt(t,function(i){return i=Rt(i,a),l||(l=i.length>1),i}),Gt(a,Vt(a),n),l&&(n=Ht(n,Yt|zt|qt,Mt));for(var r=t.length;r--;)Nt(n,t[r]);return n}),Qt=Jt;const Wt=Z(Qt),Xt={class:"go-content-charts-item-animation-patch"},Zt=["onDragstart","onDragend","onDblclick","onClick"],jt={class:"list-header"},te={class:"list-center go-flex-center go-transition",draggable:"true"},ee={class:"list-bottom"},ae={key:0,class:"list-model"},ne=["onClick"],se=st({__name:"index",props:{menuOptions:{type:Array,default:()=>[]}},emits:["deletePhoto"],setup(a,{emit:t}){const n=M(),{TrashIcon:l}=vt.ionicons5,r=t,i=V(),v=ot(),P=e=>!e.disabled&&e.package===U.PHOTOS&&e.category===z.PRIVATE,y=rt(()=>i.getChartType),$=(e,s)=>{s.disabled||(C(s.chartKey,x(s)),C(s.conKey,S(s)),e.dataTransfer.setData(_t.DRAG_KEY,ft(Wt(s,["image"]))),n.setEditCanvas(E.IS_CREATE,!0))},T=()=>{n.setEditCanvas(E.IS_CREATE,!1)},B=async e=>{if(!e.disabled)try{mt(),C(e.chartKey,x(e)),C(e.conKey,S(e));let s=await q(e);e.redirectComponent&&(e.dataset&&(s.option.dataset=e.dataset),s.chartConfig.title=e.title,s.chartConfig.chartFrame=e.chartFrame),n.addComponentList(s,!1,!0),n.setTargetSelectChart(s.id),pt()}catch{ht(),window.$message.warning("图表正在研发中, 敬请期待...")}},F=e=>{e?.configEvents?.addHandle(e)},I=(e,s)=>{Ct({message:"是否删除此图片？",transformOrigin:"center",onPositiveCallback:()=>{const p=J();r("deletePhoto",e,s),p.deletePhotos(e,s)}})};return lt(()=>y.value,e=>{e===k.DOUBLE&&it(()=>{v.value.classList.add("miniAnimation")})}),(e,s)=>{const p=h("n-ellipsis"),b=h("n-text"),K=h("n-icon"),H=h("n-button");return d(),f("div",Xt,[g("div",{ref_key:"contentChartsItemBoxRef",ref:v,class:ut(["go-content-charts-item-box",[y.value===m(k).DOUBLE?"double":"single"]])},[(d(!0),f(ct,null,dt(a.menuOptions,(o,N)=>(d(),f("div",{class:"item-box",key:o.title,draggable:"",onDragstart:_=>!o.disabled&&$(_,o),onDragend:_=>!o.disabled&&T(),onDblclick:_=>B(o),onClick:_=>F(o)},[g("div",jt,[c(m(R),{class:"list-header-control-btn",mini:!0,disabled:!0}),c(b,{class:"list-header-text",depth:"3"},{default:u(()=>[c(p,null,{default:u(()=>[O(D(o.title),1)]),_:2},1024)]),_:2},1024)]),g("div",te,[o.icon?(d(),L(m(Y),{key:0,class:"list-img",icon:o.icon,color:"#999",width:"48",style:{height:"auto"}},null,8,["icon"])):(d(),L(m(G),{key:1,class:"list-img",chartConfig:o},null,8,["chartConfig"]))]),g("div",ee,[c(b,{class:"list-bottom-text",depth:"3"},{default:u(()=>[c(p,{style:{"max-width":"90%"}},{default:u(()=>[O(D(o.title),1)]),_:2},1024)]),_:2},1024)]),o.disabled?(d(),f("div",ae)):w("",!0),P(o)?(d(),f("div",{key:1,class:"list-tools go-transition",onClick:_=>I(o,N)},[c(H,{text:"",type:"default",color:"#ffffff"},{icon:u(()=>[c(K,null,{default:u(()=>[c(m(l))]),_:1})]),default:u(()=>[s[0]||(s[0]=g("span",null,"删除",-1))]),_:1})],8,ne)):w("",!0)],40,Zt))),128))],2)])}}});const Ee=gt(se,[["__scopeId","data-v-2ca9f801"]]);export{Ee as default};
