import{d as re,b9 as pe,b as ee,e as oe,H as ce,a8 as O,Y as te,dR as me,dS as ve,dT as fe,m as s,o as u,c as v,j as e,w as o,q as g,h as c,F as U,n as A,ar as le,N as Ce,k as h,O as ge,aq as q,a2 as ne,aa as be,a9 as R,dU as he,dV as ke,a as ie,I as ae,B as V,t as xe}from"./index-3cca530d.js";import{n as ye}from"./noData-e5cefb25.js";import{g as z}from"./plugin-ede68460.js";import{i as de}from"./icon-8135a16a.js";import{u as we,E as F}from"./chartEditStore-eacdd3b3.js";import{l as Ie}from"./index-6270b1c7.js";const Ee={key:0,class:"create-color-setting"},He={class:"color-list-box go-mt-3","x-gap":12,"y-gap":12,cols:4},Te={class:"go-flex-items-center"},$e={class:"expend-color-box"},Oe=["onClick"],Re=["onClick"],Se=re({__name:"index",props:{selectColor:Object},emits:["updateColor"],setup(Y,{emit:G}){pe(a=>({"3d26029e":i.color}));const L=Y,w=G,{AddIcon:J,TrashIcon:K}=de.ionicons5,Q=Ie(()=>be(()=>import("./index-167c570d.js"),["./index-167c570d.js","./index.esm.min-1d723dc8.js","./index-3cca530d.js","../css/index-fa45cf35.css","./chartEditStore-eacdd3b3.js","./plugin-ede68460.js","./icon-8135a16a.js"],import.meta.url)),r=ee(),i=oe({index:-1,color:""});ce(()=>L.selectColor?.id,()=>{r.value=O(L.selectColor),i.index=0,i.color=r.value?.color[0]},{immediate:!0,deep:!1});const I=te(()=>p(i.color)),p=a=>{if(!a)return{default:[],fade:[]};const l=36,k=[],E=[],n=[];for(let t=0;t<l;t++)E.unshift(me(a,1/100*(t+1))),k.push(ve(a,3.5/100*(t+1)));return k.forEach((t,m)=>{n.unshift(fe(t,1/100*(m+1)))}),{default:[...E.reverse().splice(0,parseInt(`${l/2}`)-9),...k.splice(0,parseInt(`${l/2}`))],fade:n.reverse().splice(0,27)}},d=a=>({backgroundColor:a}),b=(a,l)=>{i.color=a,i.index=l},f=(a,l)=>{a&&(i.color=a),l&&(i.index=l),R(()=>{w("updateColor",r.value)})},B=(a,l)=>{const k=l?he(a):ke(a);r.value&&(r.value.color[i.index]=k),R(()=>{w("updateColor",r.value)})},S=()=>{const a=r.value?.color[r.value?.color.length-1]||"#2c2c31";r.value?.color.push(a),R(()=>{w("updateColor",r.value)})},P=a=>{r.value?.color.splice(a,1),a===i.index&&f(r.value?.color[a-1],a-1)},W=()=>{R(()=>{w("updateColor",r.value)})};return(a,l)=>{const k=s("n-input-group-label"),E=s("n-input"),n=s("n-input-group"),t=s("n-tag"),m=s("n-space"),H=s("n-color-picker"),M=s("n-icon"),D=s("n-tooltip"),T=s("n-button"),X=s("n-scrollbar"),$=s("n-card"),N=s("n-text"),j=s("n-divider");return r.value?(u(),v("div",Ee,[e($,{bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(m,{justify:"space-between"},{default:o(()=>[e(n,null,{default:o(()=>[e(k,null,{default:o(()=>l[1]||(l[1]=[g("名称:")])),_:1}),e(E,{class:"create-color-name",value:r.value.name,"onUpdate:value":l[0]||(l[0]=C=>r.value.name=C),valueModifiers:{trim:!0},maxlength:"8","show-count":"",clearable:"",onChange:W},null,8,["value"])]),_:1}),e(t,{type:"warning"},{default:o(()=>l[2]||(l[2]=[g("底部图表仅展示 7 条数据")])),_:1})]),_:1}),e(X,{style:{"max-height":"132px"}},{default:o(()=>[c("div",He,[(u(!0),v(U,null,A(r.value.color,(C,_)=>(u(),v("div",{class:"color-list-item",key:_},[c("div",{class:le(["go-flex-items-center",{select:_===i.index}])},[e(H,{style:{width:"95px"},value:r.value.color[_],"onUpdate:value":x=>r.value.color[_]=x,"show-preview":!0,modes:["hex"],onComplete:x=>f(x,_),"onUpdate:show":x=>b(C,_)},null,8,["value","onUpdate:value","onComplete","onUpdate:show"]),Ce(c("div",null,[e(D,{trigger:"hover"},{trigger:o(()=>[e(M,{class:"go-ml-1 go-cursor-pointer",size:"16",depth:3,onClick:x=>P(_)},{default:o(()=>[e(h(K))]),_:2},1032,["onClick"])]),default:o(()=>[l[3]||(l[3]=g(" 删除颜色 "))]),_:2},1024)],512),[[ge,_>5]])],2)]))),128)),c("div",null,[e(T,{type:"primary",secondary:"",onClick:S},{default:o(()=>[c("div",Te,[l[4]||(l[4]=c("span",{class:"go-mr-4"},"添加",-1)),e(M,{size:"16"},{default:o(()=>[e(h(J))]),_:1})])]),_:1})])])]),_:1})]),_:1}),c("div",$e,[e($,{class:"go-mt-3 expend-color",bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(N,null,{default:o(()=>l[5]||(l[5]=[g("默认扩展色：")])),_:1}),e(j,{style:{margin:"10px 0"}}),e(m,{size:[4,0],justify:"center"},{default:o(()=>[(u(!0),v(U,null,A(I.value.default,(C,_)=>(u(),v("div",{class:"color-computed-item",key:_,onClick:x=>B(C,!1)},[l[6]||(l[6]=c("div",{class:"n-color-picker-checkboard"},null,-1)),c("div",{style:q(d(C))},null,4)],8,Oe))),128))]),_:1})]),_:1}),e($,{class:"go-mt-3 expend-color",bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(N,null,{default:o(()=>l[7]||(l[7]=[g("透明扩展色：")])),_:1}),e(j,{style:{margin:"10px 0"}}),e(m,{size:[4,0],justify:"center"},{default:o(()=>[(u(!0),v(U,null,A(I.value.fade,(C,_)=>(u(),v("div",{class:"color-computed-item",key:_,onClick:x=>B(C,!0)},[l[8]||(l[8]=c("div",{class:"n-color-picker-checkboard"},null,-1)),c("div",{style:q(d(C))},null,4)],8,Re))),128))]),_:1})]),_:1})]),e(h(Q),{color:h(O)(r.value.color).splice(0,7)},null,8,["color"])])):ne("",!0)}}});const De=ie(Se,[["__scopeId","data-v-04bb59e0"]]),ze={class:"create-content"},Ue={class:"create-color-setting-box"},Ae={key:1,class:"no-data go-flex-center"},Le=["src"],Be={class:"color-list-box"},Pe={class:"color-list"},Me={class:"go-flex-items-center"},Ne=re({__name:"index",props:{modelShow:Boolean},emits:["update:modelShow","editSaveHandle"],setup(Y,{emit:G}){const L=Y,w=G,{DuplicateOutlineIcon:J,TrashIcon:K,ArrowDownIcon:Q}=de.ionicons5,r={id:ae(),name:"未命名",color:["#6ae5bb","#69e3de","#5ac5ee","#5ac4ee","#4498ec","#3c7ddf"]},i=we(),I=ee(!1);let p=oe(i.getEditCanvasConfig.chartCustomThemeColorInfo||[]);const d=ee(void 0),b=oe({selectInfo:p[0]});ce(()=>L.modelShow,n=>{I.value=n,n&&p.length&&(b.selectInfo=p[0])});const f=te(()=>b?.selectInfo?.id),B=te(()=>i.getEditCanvasConfig.chartThemeColor),S=n=>{n.id!==f.value&&(d.value!==void 0?z({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{d.value=void 0,b.selectInfo=n}}):b.selectInfo=n)},P=()=>{const n=()=>{const t={...O(r),id:ae()};b.selectInfo=t,p.push(t),S(t),d.value=t,l(!1)};d.value!==void 0?z({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{d.value=void 0,n()}}):n()},W=n=>{const t=()=>{p.splice(n,1),i.setEditCanvasConfig(F.CHART_CUSTOM_THEME_COLOR_INFO,O(p)),R(()=>{p.length?S(p[n-1>-1?n-1:n]):b.selectInfo=void 0})};d.value!==void 0?z({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{d.value=void 0,t()}}):z({message:"是否删除此颜色？",onPositiveCallback:()=>{t()}})},a=n=>{d.value=n},l=(n=!0)=>{if(!d.value)return;const t=p.findIndex(m=>m.id===d.value?.id);if(t!==-1){n&&window.$message.success("数据应用成功！");const m=O({...d.value,name:d.value.name||"未定义"});p.splice(t,1,m),d.value=void 0;const H=i.getEditCanvasConfig.chartThemeColor;i.setEditCanvasConfig(F.CHART_THEME_COLOR,"dark"),R(()=>{i.setEditCanvasConfig(F.CHART_CUSTOM_THEME_COLOR_INFO,O(p)),i.setEditCanvasConfig(F.CHART_THEME_COLOR,H)})}else window.$message.error("数据应用失败！")},k=()=>{const n=()=>{d.value=void 0,b.selectInfo=void 0,w("update:modelShow",!1)};d.value!==void 0?z({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{n()}}):n()},E=n=>`linear-gradient(to right, ${n.color[0]} 0%, ${n.color[5]} 100%)`;return(n,t)=>{const m=s("n-text"),H=s("n-timeline-item"),M=s("n-timeline"),D=s("n-icon"),T=s("n-button"),X=s("n-badge"),$=s("n-space"),N=s("n-divider"),j=s("n-a"),C=s("n-ellipsis"),_=s("n-card"),x=s("n-tooltip"),ue=s("n-modal");return u(),V(ue,{class:"go-chart-create-color",show:I.value,"onUpdate:show":t[0]||(t[0]=y=>I.value=y),"mask-closable":!1,closeOnEsc:!1},{default:o(()=>[e(_,{bordered:!1,role:"dialog",size:"small","aria-modal":"true",style:{width:"900px",height:"720px"}},{header:o(()=>t[1]||(t[1]=[])),"header-extra":o(()=>t[2]||(t[2]=[])),action:o(()=>[e($,{justify:"end"},{default:o(()=>[e(T,{onClick:k},{default:o(()=>t[9]||(t[9]=[g("操作完成")])),_:1})]),_:1})]),default:o(()=>[c("div",ze,[c("div",Ue,[f.value?(u(),V(h(De),{key:0,selectColor:b.selectInfo,onUpdateColor:a},null,8,["selectColor"])):(u(),v("div",Ae,[c("img",{src:h(ye),alt:"暂无数据"},null,8,Le),e(m,{depth:3},{default:o(()=>t[3]||(t[3]=[g("暂未选择自定义颜色")])),_:1})]))]),c("div",Be,[e(M,{class:"pond-item-timeline",style:{width:"20px"}},{default:o(()=>[e(H,{type:"info"}),e(H,{type:"success"})]),_:1}),c("div",Pe,[e($,null,{default:o(()=>[e(T,{class:le(["create-btn",{"is-full":!f.value}]),type:"primary",ghost:!f.value,secondary:!!f.value,onClick:P},{icon:o(()=>[e(D,null,{default:o(()=>[e(h(J))]),_:1})]),default:o(()=>[t[4]||(t[4]=c("span",null," 创建 ",-1))]),_:1},8,["class","ghost","secondary"]),f.value?(u(),V(X,{key:0,show:d.value!==void 0,dot:""},{default:o(()=>[e(T,{class:"create-btn",type:"info",secondary:"",onClick:l},{icon:o(()=>[e(D,null,{default:o(()=>[e(h(Q))]),_:1})]),default:o(()=>[t[5]||(t[5]=c("span",null," 应用数据 ",-1))]),_:1})]),_:1},8,["show"])):ne("",!0)]),_:1}),e(N,{style:{margin:"10px 0"}}),f.value?ne("",!0):(u(),V(m,{key:0,class:"not-data-text",depth:3},{default:o(()=>[t[7]||(t[7]=g(" 暂无自定义颜色， ")),e(j,{onClick:P},{default:o(()=>t[6]||(t[6]=[g("立即创建")])),_:1})]),_:1})),(u(!0),v(U,null,A(h(p),(y,se)=>(u(),v("div",{class:"color-card-box",key:se},[e(_,{class:le(["color-card",{selected:y.id===f.value}]),size:"small",hoverable:"",embedded:"",onClick:Z=>S(y)},{default:o(()=>[c("div",Me,[e(C,{style:{"text-align":"left",width:"70px"}},{default:o(()=>[g(xe(y.name),1)]),_:2},1024),(u(!0),v(U,null,A(y.color,(Z,_e)=>(u(),v("span",{class:"theme-color-item",key:_e,style:q({backgroundColor:Z})},null,4))),128))]),c("div",{class:"theme-bottom",style:q({backgroundImage:E(y)})},null,4)]),_:2},1032,["class","onClick"]),e(x,{trigger:"hover"},{trigger:o(()=>[e(T,{text:"",disabled:y.id===B.value,onClick:Z=>W(se)},{default:o(()=>[e(D,{class:"go-ml-1 go-cursor-pointer",size:"16",depth:3},{default:o(()=>[e(h(K))]),_:1})]),_:2},1032,["disabled","onClick"])]),default:o(()=>[t[8]||(t[8]=g(" 删除自定义颜色 "))]),_:2},1024)]))),128))])])])]),_:1})]),_:1},8,["show"])}}});const Je=ie(Ne,[["__scopeId","data-v-1aebdbd9"]]);export{Je as default};
